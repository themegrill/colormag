wp.customize.controlConstructor["colormag-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",(function(){e.setting.set(jQuery(this).val())}))}}),function(e){e(window).on("load",(function(){e("html").addClass("colorpicker-ready")})),wp.customize.controlConstructor["colormag-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initColorMagBackgroundControl()},initColorMagBackgroundControl:function(){var e=this,t=e.setting._value,n=e.container.find(".colormag-color-picker-alpha");(_.isUndefined(t["background-image"])||""===t["background-image"])&&(e.container.find(".customize-control-content > .background-repeat").hide(),e.container.find(".customize-control-content > .background-position").hide(),e.container.find(".customize-control-content > .background-size").hide(),e.container.find(".customize-control-content > .background-attachment").hide()),n.wpColorPicker({change:function(){jQuery("html").hasClass("colorpicker-ready")&&setTimeout((function(){e.saveValue("background-color",n.val())}),100)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0]&&e.saveValue("background-color","")}}),e.container.on("click",".background-image-upload-button, .background-image-upload .placeholder, .thumbnail-image img",(function(t){var n=wp.media({multiple:!1}).open().on("select",(function(){var t,i,a,o=n.state().get("selection").first(),r=o.toJSON().sizes.full.url;_.isUndefined(o.toJSON().sizes.medium)?_.isUndefined(o.toJSON().sizes.thumbnail)||(r=o.toJSON().sizes.thumbnail.url):r=o.toJSON().sizes.medium.url,t=o.toJSON().sizes.full.url,o.toJSON().id,o.toJSON().width,o.toJSON().height,""!==t&&e.container.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),e.saveValue("background-image",t),i=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".background-image-upload-remove-button"),i.length&&i.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+r+'" alt="" />'),a.length&&a.show()}));t.preventDefault()})),e.container.on("click",".background-image-upload-remove-button",(function(t){var n,i;t.preventDefault(),e.saveValue("background-image",""),n=e.container.find(".placeholder, .thumbnail"),i=e.container.find(".background-image-upload-remove-button"),e.container.find(".customize-control-content > .background-repeat").hide(),e.container.find(".customize-control-content > .background-position").hide(),e.container.find(".customize-control-content > .background-size").hide(),e.container.find(".customize-control-content > .background-attachment").hide(),n.length&&n.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),i.length&&i.hide()})),e.container.on("change",".background-repeat select",(function(){e.saveValue("background-repeat",jQuery(this).val())})),e.container.on("change",".background-position select",(function(){e.saveValue("background-position",jQuery(this).val())})),e.container.on("change",".background-size select",(function(){e.saveValue("background-size",jQuery(this).val())})),e.container.on("change",".background-attachment select",(function(){e.saveValue("background-attachment",jQuery(this).val())}))},saveValue:function(e,t){var n=this,i=jQuery("#customize-control-"+n.id.replace("[","-").replace("]","")+" .background-hidden-value"),a=n.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),n.setting.set(a)}})}(jQuery),function(e){e(window).on("load",(function(){e("html").addClass("colorpicker-ready")})),wp.customize.controlConstructor["colormag-color"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t="hue"===this.params.mode,n=this.container.find(".colormag-color-picker-alpha"),i=n.val().replace(/\s+/g,"");n.wpColorPicker({change:function(a,o){var r=t?o.color.h():n.iris("color");jQuery("html").hasClass("colorpicker-ready")&&i!==r.replace(/\s+/g,"")&&e.setting.set(r)},clear:function(){e.setting.get()||e.setting.set(""),e.setting.set("")}})}})}(jQuery),wp.customize.controlConstructor["colormag-dropdown-categories"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("change","select",(function(){e.setting.set(jQuery(this).val())}))}}),function(e,t){t.controlConstructor["colormag-dimensions"]=t.Control.extend({ready:function(){let t=this,n=this.container.find(".control input"),i=this.container.find(".colormag-dimensions-reset"),a=this.container.find(".dimension-unit");n.on("change input",(function(){let i=e(this);i.closest(".control").hasClass("linked")?(t.update({value:i.val(),side:"all"}),n.val(i.val())):t.update({value:i.val(),side:i.data("type")})})),a.on("change",(function(){t.update({value:"",side:"all"}),t.update({value:e(this).val(),side:"unit"}),n.val("")})),t.container.find(".colormag-binding").on("click",(function(t){t.preventDefault();var n=e(this),i=n.parent(".control");n.toggleClass("active"),i.toggleClass("linked"),n.hasClass("active")&&i.find("input").val(i.find("input").first().val()).trigger("change")})),i.on("click",(function(e){e.preventDefault(),t.reset()})),t.container.find(`input#colormag_dimensions_${t.id}`).on("change",(function(){t.setting.set(JSON.parse(e(this).val()))}))},update:function({value:t,side:n="top"}){var i=this.container.find(`input#colormag_dimensions_${this.id}`),a=JSON.parse(i.val());"all"===n?a=e.extend(a,{top:t,right:t,bottom:t,left:t}):a[n]=t,i.val(JSON.stringify(a)).trigger("change")},reset(){var e=this,t=e.params.default;["top","right","bottom","left","unit"].forEach((function(n){var i=t[n]?t[n]:"";e.update({value:i,side:n}),e.container.find(`[data-type="${n}"]`).val(i)}))}})}(jQuery,wp.customize),wp.customize.controlConstructor["colormag-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t="editor_"+e.id;wp.editor&&wp.editor.initialize&&wp.editor.initialize(t,{tinymce:{wpautop:!0,setup:function(t){t.on("Paste Change input Undo Redo",(function(){var n=t.getContent();wp.customize.instance(e.id).set(n)}))}},quicktags:!0,mediaButtons:!0})}}),function(e){wp.customize.controlConstructor["colormag-fontawesome"]=wp.customize.Control.extend({ready:function(){"use strict";this.initColorMagFontawesomeControl()},initColorMagFontawesomeControl:function(){var t,n=this,i=n.selector,a=e(i).find("select"),o=[],r=n.setting._value,s=window["ColorMagCustomizerControlFontawesome"+this.id],l=0;e.each(s,(function(e,t){o[l]={id:t,text:t},l++})),(t=a.selectWoo({data:o,width:"100%",templateResult:function(t){return t.id?e('<span><i class="fa fa-lg '+t.text+'"></i> '+t.text+"</span>"):t.text}})).val(r).trigger("change"),t.on("change",(function(){n.setting.set(a.val())}))}})}(jQuery),function(e){e(window).on("load",(function(){e("html").addClass("colorpicker-ready")})),wp.customize.controlConstructor["colormag-gradient"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;t.initColorControl(),t.initColorStopControl(),t.initColor2Control(),t.initColorStop2Control(),t.initGradientAngleControl();var n=e(".types select").find(":selected").val();"radial"===n&&(t.container.find(".type > .type-linear").hide(),t.container.find(".type > .type-radial").show()),"linear"===n&&(t.container.find(".type > .type-radial").hide(),t.container.find(".type > .type-linear").show()),t.container.on("change",".types select",(function(){"radial"===e(this).find(":selected").val()&&(t.container.find(".type > .type-linear").hide(),t.container.find(".type > .type-radial").show()),"linear"===e(this).find(":selected").val()&&(t.container.find(".type > .type-radial").hide(),t.container.find(".type > .type-linear").show()),t.saveValue("gradient-type",jQuery(".types select").val())})),t.container.on("change",".type-radial select",(function(){t.saveValue("gradient-position",jQuery(".type-radial select").val())}))},initColorControl:function(){var e=this,t=(e.setting._value,e.container.find(".color .colormag-color-picker-alpha"));t.wpColorPicker({change:function(){jQuery("html").hasClass("colorpicker-ready")&&setTimeout((function(){e.saveValue("color",t.val())}),100)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".primary-color .wp-color-picker")[0]&&e.saveValue("color","")}})},initColorStopControl:function(){"use strict";var e=this;e.setting._value;this.container.find(".color-stop input[type=range]").on("input change",(function(){var e=jQuery(this).val(),t=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .value");t.val(e),t.change()})),jQuery(".color-stop .slider-wrapper").on("input change","input[type=number]",(function(){var t=jQuery(this).val();jQuery(this).closest(".color-stop .slider-wrapper").find("input[type=range]").val(t),e.saveValue("color-stop",t)}))},initColor2Control:function(){var e=this,t=(e.setting._value,e.container.find(".color-2 .colormag-color-picker-alpha"));t.wpColorPicker({change:function(){jQuery("html").hasClass("colorpicker-ready")&&setTimeout((function(){e.saveValue("color-2",t.val())}),100)},clear:function(t){jQuery(t.target).closest(".wp-picker-input-wrap").find(".secondary-color .wp-color-picker")[0]&&e.saveValue("color-2","")}})},initColorStop2Control:function(){"use strict";var e=this;e.setting._value;this.container.find(".color-stop-2 input[type=range]").on("input change",(function(){var e=jQuery(this).val(),t=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .value");t.val(e),t.change()})),jQuery(".color-stop-2 .slider-wrapper").on("input change","input[type=number]",(function(){var t=jQuery(this).val();jQuery(this).closest(".color-stop-2 .slider-wrapper").find("input[type=range]").val(t),e.saveValue("color-stop-2",t)}))},initGradientAngleControl:function(){"use strict";var e=this;e.setting._value;this.container.find(".type-linear input[type=range]").on("input change",(function(){var e=jQuery(this).val(),t=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .value");t.val(e),t.change()})),jQuery(".type-linear .slider-wrapper").on("input change","input[type=number]",(function(){var t=jQuery(this).val();jQuery(this).closest(".type-linear .slider-wrapper").find("input[type=range]").val(t),e.saveValue("gradient-angle",t)}))},saveValue:function(e,t){var n=this,i=jQuery("#customize-control-"+n.id.replace("[","-").replace("]","")+" .gradient-hidden-value"),a=n.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),n.setting.set(a)}})}(jQuery),function(e){wp.customize.controlConstructor["colormag-group"]=wp.customize.Control.extend({ready:function(){"use strict";this.registerToggleEvents(),this.container.on("colormag_settings_changed",this.onOptionChange)},registerToggleEvents:function(){let t=this;e(".wp-full-overlay-sidebar-content").click((function(t){e(t.target).closest(".colormag-field-settings-modal").length||e(".colormag-group-toggle-icon.open").trigger("click")})),t.container.on("click",".colormag-group-wrap .colormag-group-toggle-icon",(function(n){n.preventDefault(),n.stopPropagation();let i=e(this),a=i.closest(".customize-control-colormag-group"),o=a.find(".colormag-field-settings-modal").data("loaded"),r=a.parents(".control-section");if(i.hasClass("open"))a.find(".colormag-field-settings-modal").hide();else{let n=r.find(".colormag-group-toggle-icon.open");if(n.length>0&&n.trigger("click"),o)a.find(".colormag-field-settings-modal").show();else{let n=t.params.colormag_fields,i=e(ColorMagCustomizerControlGroup.group_modal_tmpl),o=e("#customize-footer-actions .active").attr("data-device");a.find(".colormag-field-settings-wrap").append(i),a.find(".colormag-fields-wrap").attr("data-control",t.params.name),t.colormag_render_field(a,n,t),a.find(".colormag-field-settings-modal").show(),"mobile"===o?(e(".control-wrap.mobile").addClass("active"),e(".responsive-switchers .preview-mobile").addClass("active"),e(".control-wrap.tablet, .control-wrap.desktop").removeClass("active"),e(".responsive-switchers .preview-tablet, .responsive-switchers .preview-desktop").removeClass("active")):"tablet"===o?(e(".control-wrap.tablet").addClass("active"),e(".responsive-switchers .preview-tablet").addClass("active"),e(".control-wrap.mobile, .control-wrap.desktop").removeClass("active"),e(".responsive-switchers .preview-mobile, .responsive-switchers .preview-desktop").removeClass("active")):(e(".control-wrap.desktop").addClass("active"),e(".responsive-switchers .preview-desktop").addClass("active"),e(".control-wrap.mobile, .control-wrap.tablet").removeClass("active"),e(".responsive-switchers .preview-mobile, .responsive-switchers .preview-tablet").removeClass("active"))}}i.toggleClass("open")})),t.container.on("click",".colormag-group-wrap > .customizer-text",(function(t){t.preventDefault(),t.stopPropagation(),e(this).find(".colormag-group-toggle-icon").trigger("click")}))},colormag_render_field:function(t,n,i){let a=this,o=t.find(".colormag-fields-wrap"),r="",s=[],l=a.isJSONString(i.params.value)?JSON.parse(i.params.value):{};if(void 0!==n.tabs){let t=0;r+='<div id="'+i.params.name+'-tabs" class="colormag-group-tabs">',r+='<ul class="colormag-group-list">',_.each(n.tabs,(function(e,n){let i="";0===t&&(i="active"),r+='<li class="'+i+'"><a href="#tab-'+n.replace(" ","-")+'"><span>'+n+"</span></a></li>",t++})),r+="</ul>",r+='<div class="colormag-tab-content" >',_.each(n.tabs,(function(e,t){let n=a.generateFieldHtml(e,l);r+='<div id="tab-'+t.replace(" ","-")+'" class="tab">',r+=n.html,_.each(n.controls,(function(e,t){s.push({key:e.key,value:e.value,name:e.name})})),r+="</div>"})),r+="</div>",r+="</div>",o.html(r),e("#"+i.params.name+"-tabs").tabs()}else{let e=a.generateFieldHtml(n,l);r+=e.html,_.each(e.controls,(function(e,t){s.push({key:e.key,value:e.value,name:e.name})})),o.html(r)}_.each(s,(function(e,t){switch(e.key){case"colormag-color":a.initColorControl(o,i,e.name);break;case"colormag-background":a.initBackgroundControl(i,e,e.name);break;case"colormag-typography":a.initTypographyControl(i,e,e.name)}})),t.find(".colormag-field-settings-modal").data("loaded",!0)},isJSONString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},generateFieldHtml:function(e,t){let n="",i=[];_.each(e,(function(e,t){let a=wp.customize.control(e.name)?wp.customize.control(e.name).params.value:"",o=e.control,r="customize-control-"+o+"-content",s=wp.template(r),l=a||e.default,c="",u="";e.value=l,e.title=e.label,_.each(e.data_attrs,(function(e,t){c+=" data-"+t+' ="'+e+'"'})),_.each(e.input_attrs,(function(e,t){u+=t+' ="'+e+'"'})),e.dataAttrs=c,e.inputAttrs=u,i.push({key:o,value:l,name:e.name});let d="",p=["colormag-typography"];"colormag-typography"===e.control&&p.includes(e.control)&&(e.languages=ColorMagCustomizerControlTypographySubsets),p.includes(e.control)&&(d="has-responsive-switchers"),e.suffix=window[e.name].suffix,e.default_suffix=window[e.name].default_suffix,e.input_attrs=window[e.name].input_attrs,n+='<li id="customize-control-'+e.name+'" class="customize-control '+d+" customize-control-"+e.control+'" >',n+=s(e),n+="</li>"}));let a=new Object;return a.controls=i,a.html=n,a},onOptionChange:function(t,n,i,a,o){e(".hidden-field-"+o).val(a),wp.customize.control(o).setting.set(a)},initColorControl:function(t,n,i){let a=this;t.find(".customize-control-colormag-color .colormag-color-picker-alpha").wpColorPicker({change:function(t,n){if(void 0!==t.originalEvent||void 0!==n.color._alpha){let n=e(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];i=e(n).parents(".customize-control").attr("id");let o=e("#"+i+".customize-control-colormag-color .colormag-color-picker-alpha");i=i.replace("customize-control-","");let r=o.iris("color");e(n).val(r),a.container.trigger("colormag_settings_changed",[a,e(n),r,i])}},clear:function(t){let n=e(t.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];i=(i=e(n).parents(".customize-control").attr("id")).replace("customize-control-",""),e(n).val(""),a.container.trigger("colormag_settings_changed",[a,e(n),"",i]),wp.customize.previewer.refresh()}})},initBackgroundControl:function(t,n,i){let a=e("#customize-control-"+t.id.replace("[","-").replace("]","")+" .background-hidden-value"),o=JSON.parse(a.val()),r=n.name,s=t.container.find(".colormag-color-picker-alpha"),l=t.container.find("#customize-control-"+r);(_.isUndefined(o["background-image"])||""===o["background-image"])&&(l.find(".customize-control-content > .background-repeat").hide(),l.find(".customize-control-content > .background-position").hide(),l.find(".customize-control-content > .background-size").hide(),l.find(".customize-control-content > .background-attachment").hide()),s.wpColorPicker({change:function(){if(e("html").hasClass("colorpicker-ready")){let n=e(this);setTimeout((function(){t.saveBackgroundValue("background-color",s.val(),n,i)}),100)}},clear:function(n){let a=e(n.target).closest(".wp-picker-input-wrap").find(".wp-color-picker")[0];a&&t.saveBackgroundValue("background-color","",e(a),i),wp.customize.previewer.refresh()}}),l.on("click",".background-image-upload-button, .thumbnail-image img",(function(n){let a=e(this),o=wp.media({multiple:!1}).open().on("select",(function(){let e,n,r,s,c,u,d=o.state().get("selection").first(),p=d.toJSON().sizes.full.url;_.isUndefined(d.toJSON().sizes.medium)?_.isUndefined(d.toJSON().sizes.thumbnail)||(p=d.toJSON().sizes.thumbnail.url):p=d.toJSON().sizes.medium.url,e=d.toJSON().sizes.full.url,n=d.toJSON().id,r=d.toJSON().width,s=d.toJSON().height,""!==e&&l.find(".customize-control-content > .background-repeat, .customize-control-content > .background-position, .customize-control-content > .background-size, .customize-control-content > .background-attachment").show(),t.saveBackgroundValue("background-image",e,a,i),c=l.find(".placeholder, .thumbnail"),u=l.find(".background-image-upload-remove-button"),c.length&&c.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+p+'" alt="" />'),u.length&&u.show()}));n.preventDefault()})),l.on("click",".background-image-upload-remove-button",(function(n){let i,a;n.preventDefault(),t.saveBackgroundValue("background-image","",e(this)),i=l.find(".placeholder, .thumbnail"),a=l.find(".background-image-upload-remove-button"),l.find(".customize-control-content > .background-repeat").hide(),l.find(".customize-control-content > .background-position").hide(),l.find(".customize-control-content > .background-size").hide(),l.find(".customize-control-content > .background-attachment").hide(),i.length&&i.removeClass().addClass("placeholder").html(ColorMagCustomizerControlBackground.placeholder),a.length&&a.hide()})),l.on("change",".background-repeat select",(function(){t.saveBackgroundValue("background-repeat",e(this).val(),e(this),i)})),l.on("change",".background-position select",(function(){t.saveBackgroundValue("background-position",e(this).val(),e(this),i)})),l.on("change",".background-size select",(function(){t.saveBackgroundValue("background-size",e(this).val(),e(this),i)})),l.on("change",".background-attachment select",(function(){t.saveBackgroundValue("background-attachment",e(this).val(),e(this),i)}))},saveBackgroundValue:function(t,n,i,a){let o=this,r=e("#customize-control-"+o.id.replace("[","-").replace("]","")+" .background-hidden-value"),s=JSON.parse(r.val());s[t]=n,e(r).attr("value",JSON.stringify(s)).trigger("change"),a=(a=e(i).parents(".customize-control").attr("id")).replace("customize-control-",""),o.container.trigger("colormag_settings_changed",[o,i,s,a])},initTypographyControl:function(t,n,i){t.setting._value;let a=n.name,o=t.container.find("#customize-control-"+a);function r(e){t.container.find(`.${e} .control-wrap`).each((function(){const t=jQuery(this),i=t.find(".range input"),a=t.find(".size input"),o=t.find(".unit-wrapper select"),r=i.data("reset_value"),s=i.data("reset_unit");if(s){let t=n.input_attrs.attributes_config[e][s];t&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",t.min),jQuery(this).attr("max",t.max),jQuery(this).attr("step",t.step)}))}o.val(s),i.val(r),a.val(r),a.change()}))}n.input_attrs=window[n.name].input_attrs,t.renderTypographyFontSelector(e(this),i,n),t.renderTypographyVariantSelector(e(this),i,n),t.renderTypographySubsetSelector(e(this),i,n),o.on("change",".font-style select",(function(){t.saveTypographyValue("font-style",e(this).val(),e(this),i)})),o.on("change",".text-transform select",(function(){t.saveTypographyValue("text-transform",e(this).val(),e(this),i)})),o.on("change",".text-decoration select",(function(){t.saveTypographyValue("text-decoration",e(this).val(),e(this),i)})),o.on("change keyup paste input",".font-size input",(function(){let a=jQuery(this),o=a.val(),r=a.attr("max"),s=a.attr("min"),l=(o-s)/(r-s)*100,c=jQuery(this).closest(".slider-wrapper"),u=c.find("input[type=range]"),d=c.find("input[type=number]").data("device"),p=c.find(".colormag-font-size-"+d+"-warning"),g=(u.val(o),`linear-gradient(to right, #0073AA 0%, #0073AA ${l}%, #ebebeb ${l}%, #ebebeb 100%)`);u.css("background",g);let h=parseFloat(r),f=parseFloat(s),m=parseFloat(o);f>m||h<m?(p.html("Value must be between "+s+" and "+r),p.addClass("warning-visible"),a.addClass("invalid-color")):(p.removeClass("warning-visible"),a.removeClass("invalid-color")),t.saveTypographyFontSize(e(this),i,n)})),o.find(".font-size .control-wrap").each((function(){let e=jQuery(this).find("input[type=number]").data("device"),t=jQuery(this).closest(".font-size").find("."+e+" input[type=range]"),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",r)})),t.container.find(".line-height .control-wrap").each((function(){let e=jQuery(this).find("input[type=number]").data("device"),t=jQuery(this).closest(".line-height").find("."+e+" input[type=range]"),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",r)})),t.container.find(".letter-spacing .control-wrap").each((function(){let e=jQuery(this).find("input[type=number]").data("device"),t=jQuery(this).closest(".letter-spacing").find("."+e+" input[type=range]"),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",r)})),o.on("change keyup paste input",".font-size select",(function(){var a=jQuery(this).closest(".control-wrap"),o=a.find(".range input");a.find(".size input").val(""),a.find(".range input").val("");o.css("background","linear-gradient(to right, #0073AA 0%, #0073AA 0%, #ebebeb 0%, #ebebeb 100%)"),t.saveTypographyFontSizeUnit(e(this),i,n)})),o.on("change keyup paste input",".line-height input",(function(){let a=jQuery(this),o=a.val(),r=a.attr("max"),s=a.attr("min"),l=(o-s)/(r-s)*100,c=jQuery(this).closest(".slider-wrapper"),u=c.find("input[type=range]"),d=c.find("input[type=number]").data("device"),p=c.find(".colormag-line-height-"+d+"-warning"),g=(u.val(o),`linear-gradient(to right, #0073AA 0%, #0073AA ${l}%, #ebebeb ${l}%, #ebebeb 100%)`);u.css("background",g);let h=parseFloat(r),f=parseFloat(s),m=parseFloat(o);f>m||h<m?(p.html("Value must be between "+s+" and "+r),p.addClass("warning-visible"),a.addClass("invalid-color")):(p.removeClass("warning-visible"),a.removeClass("invalid-color")),t.saveTypographyLineHeight(e(this),i,n)})),o.on("change keyup paste input",".line-height select",(function(){let a=jQuery(this).closest(".control-wrap"),o=a.find(".range input");a.find(".size input").val(""),a.find(".range input").val("");o.css("background","linear-gradient(to right, #0073AA 0%, #0073AA 0%, #ebebeb 0%, #ebebeb 100%)"),t.saveTypographyLineHeightUnit(e(this),i,n)})),o.on("change keyup paste input",".letter-spacing input",(function(){let a=jQuery(this),o=a.val(),r=a.attr("max"),s=a.attr("min"),l=(o-s)/(r-s)*100,c=jQuery(this).closest(".slider-wrapper"),u=c.find("input[type=range]"),d=c.find("input[type=number]").data("device"),p=c.find(".colormag-letter-spacing-"+d+"-warning"),g=(u.val(o),`linear-gradient(to right, #0073AA 0%, #0073AA ${l}%, #ebebeb ${l}%, #ebebeb 100%)`);u.css("background",g);let h=parseFloat(r),f=parseFloat(s),m=parseFloat(o);f>m||h<m?(p.html("Value must be between "+s+" and "+r),p.addClass("warning-visible"),a.addClass("invalid-color")):(p.removeClass("warning-visible"),a.removeClass("invalid-color")),t.saveTypographyLetterSpacing(e(this),i,n)})),o.on("change keyup paste input",".letter-spacing select",(function(){t.saveTypographyLetterSpacingUnit(e(this),i,n)})),this.container.find(".font-size input[type=range]").on("input change",(function(){let e=jQuery(this),t=e.val(),n=e.attr("max"),i=e.attr("min"),a=(t-i)/(n-i)*100,o=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input"),r=`linear - gradient( to right, #0073AA 0 % , #0073AA ${a} % , #ebebeb ${a} % , #ebebeb 100 % )`;e.css("background",r),o.val(t),o.change()})),this.container.find(".line-height input[type=range]").on("input change",(function(){let e=jQuery(this),t=e.val(),n=e.attr("max"),i=e.attr("min"),a=(t-i)/(n-i)*100,o=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input"),r=`linear - gradient( to right, #0073AA 0 % , #0073AA ${a} % , #ebebeb ${a} % , #ebebeb 100 % )`;e.css("background",r),o.val(t),o.change()})),this.container.find(".letter-spacing input[type=range]").on("input change",(function(){let e=jQuery(this),t=e.val(),n=e.attr("max"),i=e.attr("min"),a=(t-i)/(n-i)*100,o=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input"),r=`linear - gradient( to right, #0073AA 0 % , #0073AA ${a} % , #ebebeb ${a} % , #ebebeb 100 % )`;e.css("background",r),o.val(t),o.change()})),t.container.on("click",".colormag-font-size-reset",(function(){r("font-size")})),t.container.on("click",".colormag-line-height-reset",(function(){r("line-height")})),t.container.on("click",".colormag-letter-spacing-reset",(function(){r("letter-spacing")}))},renderTypographyFontSelector:function(t,n,i){let a,o=this,r=o.selector+" .font-family select",s=[],l=[],c=[],u=e("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),d=JSON.parse(u.val()),p=o.getTypographyFonts();_.isUndefined(p.standard)||_.each(p.standard,(function(e){s.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})})),_.isUndefined(p.google)||_.each(p.google,(function(e){l.push({id:e.family,text:e.label})})),data=[{text:p.standardfontslabel,children:s},{text:p.googlefontslabel,children:l}],_.isUndefined(p.custom)||(_.each(p.custom,(function(e){c.push({id:e.family,text:e.label})})),data.push({text:p.customfontslabel,children:c})),a=e(r).selectWoo({data:data,width:"100%"}),d["font-family"]&&a.val(d["font-family"].replace(/'/g,'"')).trigger("change"),a.on("change",(function(){o.saveTypographyValue("font-family",e(this).val(),e(this),n),o.renderTypographyVariantSelector(e(this),n,i),o.renderTypographySubsetSelector(e(this),n,i)}))},getTypographyFonts:function(){return _.isUndefined(ColorMagCustomizerControlTypography)?{google:[],standard:[]}:ColorMagCustomizerControlTypography},renderTypographyVariantSelector:function(t,n,i){let a,o=this,r=e("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),s=JSON.parse(r.val()),l=s["font-family"],c=o.getTypographyVariants(l),u=o.selector+" .font-weight select",d=[],p=!1;!1!==c?(e(o.selector+" .font-weight").show(),_.each(c,(function(e){s["font-weight"]===e.id&&(p=!0),d.push({id:e.id,text:e.label})})),p||(s["font-weight"]="regular"),e(u).hasClass("select2-hidden-accessible")&&(e(u).selectWoo("destroy"),e(u).empty()),a=e(u).selectWoo({data:d,width:"100%"}),a.val(s["font-weight"]).trigger("change"),a.on("change",(function(){o.saveTypographyValue("font-weight",e(this).val(),e(this),n)}))):e(o.selector+" .font-weight").hide()},getTypographyVariants:function(e){let t=this.getTypographyFonts(),n=!1;return _.each(t.standard,(function(t){if(e&&t.family===e.replace(/'/g,'"'))return n=t.variants,n})),_.each(t.google,(function(t){if(t.family===e)return n=t.variants,n})),_.isUndefined(t.custom)||_.each(t.custom,(function(t){if(t.custom===e)return n=t.variants,n})),n},renderTypographySubsetSelector:function(t,n,i){let a,o=this,r=e("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),s=JSON.parse(r.val()),l=s["font-family"],c=o.getTypographySubsets(l),u=o.selector+" .subsets select",d=[],p=s.subsets;!1!==c?(e(o.selector+" .subsets").show(),_.each(c,(function(e){_.isObject(p)&&-1===p.indexOf(e.id)&&(p=_.reject(p,(function(t){return t===e.id}))),d.push({id:e.id,text:e.label})}))):e(o.selector+" .subsets").hide(),e(u).hasClass("select2-hidden-accessible")&&(e(u).selectWoo("destroy"),e(u).empty()),a=e(u).selectWoo({data:d,width:"100%"}),a.val(p).trigger("change"),a.on("change",(function(){o.saveTypographyValue("subsets",e(this).val(),e(this),n)}))},getTypographySubsets:function(e){let t=!1,n=this.getTypographyFonts();return _.each(n.google,(function(n){if(n.family===e)return t=n.subsets,t})),t},saveTypographyFontSize:function(t,n,i){let a=this,o=e("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),r=JSON.parse(o.val()),s=i.name,l=a.container.find("#customize-control-"+s),c={"font-size":{desktop:{size:r["font-size"].desktop.size,unit:r["font-size"].desktop.unit},tablet:{size:r["font-size"].tablet.size,unit:r["font-size"].tablet.unit},mobile:{size:r["font-size"].mobile.size,unit:r["font-size"].mobile.unit}}};l.find(".font-size .control-wrap").each((function(){let t=e(this).find("input[type=number]").val(),n=e(this).find("input[type=number]").data("device");c["font-size"][n]||(c["font-size"][n]={}),c["font-size"][n].size=t})),e.extend(r,c),e(o).attr("value",JSON.stringify(r)).trigger("change"),n=(n=e(t).parents(".customize-control").attr("id")).replace("customize-control-",""),a.container.trigger("colormag_settings_changed",[a,t,r,n])},saveTypographyFontSizeUnit:function(t,n,i){let a=e("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),o=JSON.parse(a.val()),r=i.name,s=this.container.find("#customize-control-"+r),l={"font-size":{desktop:{size:o["font-size"].desktop.size,unit:o["font-size"].desktop.unit},tablet:{size:o["font-size"].tablet.size,unit:o["font-size"].tablet.unit},mobile:{size:o["font-size"].mobile.size,unit:o["font-size"].mobile.unit}}};s.find(".font-size .control-wrap").each((function(){let t=e(this).find("select").val(),n=e(this).find("select").data("device");if(l["font-size"][n]||(l["font-size"][n]={}),i.input_attrs=window[i.name].input_attrs,t){let e=i.input_attrs.attributes_config["font-size"][t];e&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",e.min),jQuery(this).attr("max",e.max),jQuery(this).attr("step",e.step)}))}l["font-size"][n].unit=t})),e.extend(o,l),e(a).attr("value",JSON.stringify(o))},saveTypographyLineHeight:function(t,n,i){let a=this,o=e("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),r=JSON.parse(o.val()),s=i.name,l=a.container.find("#customize-control-"+s),c={"line-height":{desktop:{size:r["line-height"].desktop.size,unit:r["line-height"].desktop.unit},tablet:{size:r["line-height"].tablet.size,unit:r["line-height"].tablet.unit},mobile:{size:r["line-height"].mobile.size,unit:r["line-height"].mobile.unit}}};l.find(".line-height .control-wrap").each((function(){let t=e(this).find("input[type=number]").val(),n=e(this).find("input[type=number]").data("device");c["line-height"][n]||(c["line-height"][n]={}),c["line-height"][n].size=t})),e.extend(r,c),e(o).attr("value",JSON.stringify(r)).trigger("change"),n=(n=e(t).parents(".customize-control").attr("id")).replace("customize-control-",""),a.container.trigger("colormag_settings_changed",[a,t,r,n])},saveTypographyLineHeightUnit:function(t,n,i){let a=e("#customize-control-"+this.id.replace("[","-").replace("]","")+" .typography-hidden-value"),o=JSON.parse(a.val()),r=i.name,s=this.container.find("#customize-control-"+r),l={"line-height":{desktop:{size:o["line-height"].desktop.size,unit:o["line-height"].desktop.unit},tablet:{size:o["line-height"].tablet.size,unit:o["line-height"].tablet.unit},mobile:{size:o["line-height"].mobile.size,unit:o["line-height"].mobile.unit}}};s.find(".line-height .control-wrap").each((function(){let t=e(this).find("select").val(),n=e(this).find("select").data("device");if(l["line-height"][n]||(l["line-height"][n]={}),i.input_attrs=window[i.name].input_attrs,t){let e=i.input_attrs.attributes_config["line-height"][t];e&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",e.min),jQuery(this).attr("max",e.max),jQuery(this).attr("step",e.step)}))}l["line-height"][n].unit=t})),e.extend(o,l),e(a).attr("value",JSON.stringify(o))},saveTypographyLetterSpacing:function(t,n,i){let a=this,o=e("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),r=JSON.parse(o.val()),s=i.name,l=a.container.find("#customize-control-"+s),c={"letter-spacing":{desktop:{size:r["letter-spacing"].desktop.size,unit:r["letter-spacing"].desktop.unit},tablet:{size:r["letter-spacing"].tablet.size,unit:r["letter-spacing"].tablet.unit},mobile:{size:r["letter-spacing"].mobile.size,unit:r["letter-spacing"].mobile.unit}}};l.find(".letter-spacing .control-wrap").each((function(){let t=e(this).find("input[type=number]").val(),n=e(this).find("input[type=number]").data("device");c["letter-spacing"][n]||(c["letter-spacing"][n]={}),c["letter-spacing"][n].size=t})),e.extend(r,c),e(o).attr("value",JSON.stringify(r)).trigger("change"),n=(n=e(t).parents(".customize-control").attr("id")).replace("customize-control-",""),a.container.trigger("colormag_settings_changed",[a,t,r,n])},saveTypographyLetterSpacingUnit:function(t,n,i){let a=this,o=e("#customize-control-"+a.id.replace("[","-").replace("]","")+" .typography-hidden-value"),r=JSON.parse(o.val()),s=i.name,l=a.container.find("#customize-control-"+s),c={"letter-spacing":{desktop:{size:r["letter-spacing"].desktop.size,unit:r["letter-spacing"].desktop.unit},tablet:{size:r["letter-spacing"].tablet.size,unit:r["letter-spacing"].tablet.unit},mobile:{size:r["letter-spacing"].mobile.size,unit:r["letter-spacing"].mobile.unit}}};l.find(".letter-spacing .control-wrap").each((function(){let t=e(this).find("select").val(),n=e(this).find("select").data("device");c["letter-spacing"][n]||(c["letter-spacing"][n]={}),c["letter-spacing"][n].unit=t})),e.extend(r,c),e(o).attr("value",JSON.stringify(r)).trigger("change"),n=(n=e(t).parents(".customize-control").attr("id")).replace("customize-control-",""),a.container.trigger("colormag_settings_changed",[a,t,r,n])},saveTypographyValue:function(t,n,i,a){let o=this,r=e("#customize-control-"+o.id.replace("[","-").replace("]","")+" .typography-hidden-value"),s=JSON.parse(r.val());s[t]=n,e(r).attr("value",JSON.stringify(s)).trigger("change"),a=(a=e(i).parents(".customize-control").attr("id")).replace("customize-control-",""),o.container.trigger("colormag_settings_changed",[o,i,s,a])}})}(jQuery),function(e){e(window).on("load",(function(){e(".tg-navigate a").on("click",(function(t){t.preventDefault();var n=e(this).data("target"),i=e(this).data("section");i&&("panel"===n?wp.customize.panel(i).focus():wp.customize.section(i).focus())}))}))}(jQuery),wp.customize.controlConstructor["colormag-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;e.sortableContainer=e.container.find("ul.sortable").first(),e.unsortableContainer=e.container.find("ul.unsortable").first(),e.unsortableContainer.find("li").each((function(){jQuery(this).find(".switch").on("click",(function(){jQuery(this).parents("li:eq(0)").toggleClass("invisible")}))})).click((function(){e.updateValue()})),e.sortableContainer.sortable({stop:function(){e.updateValue()}}).disableSelection().find("li").each((function(){jQuery(this).find(".switch").click((function(){jQuery(this).parents("li:eq(0)").toggleClass("invisible")}))})).click((function(){e.updateValue()}))},updateValue:function(){"use strict";var e,t=[],n=[];this.sortableContainer.find("li").each((function(){jQuery(this).is(".invisible")||t.push(jQuery(this).data("value"))})),this.unsortableContainer.find("li").each((function(e){jQuery(this).is(".invisible")||n.push(jQuery(this).data("value"))})),e=n.concat(t),this.setting.set(e)}}),wp.customize.controlConstructor["colormag-slider"]=wp.customize.Control.extend({ready:function(){"use strict";let e=this,t=this.container.find(".colormag-progress"),n=this.container.find(".size input").val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100;if(""===n){let e=`linear-gradient(to right, #ebebeb 0%, #ebebeb ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",e)}else{let e=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",e)}e.container.on("change keyup paste input",".size input",(function(){let n=jQuery(this),i=n.val(),a=n.attr("max"),o=t.attr("min"),r=(i-o)/(a-o)*100,s=jQuery(this).closest(".slider-wrapper"),l=s.find("input[type=range]"),c=s.find(".colormag-warning"),u=(l.val(i),`linear-gradient(to right, #0073AA 0%, #0073AA ${r}%, #ebebeb ${r}%, #ebebeb 100%)`);l.css("background",u);let d=parseFloat(a),p=parseFloat(o),g=parseFloat(i);p>g||d<g?(c.html("Value must be between "+o+" and "+a),c.addClass("warning-visible"),n.addClass("invalid-color")):(c.removeClass("warning-visible"),n.removeClass("invalid-color")),e.updateSize()})),e.container.on("change keyup paste input",".range input",(function(){e.updateSize()})),e.container.on("change",".unit-wrapper select",(function(){e.container.find(".slider-label").each((function(){var t=jQuery(this).find(".unit-wrapper select").val();if(t){var n=e.params.input_attrs.attributes_config[t];n&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",n.min),jQuery(this).attr("max",n.max),jQuery(this).attr("step",n.step)}))}}));let t=jQuery(this).closest(".slider-label"),n=t.find(".range input");t.find(".size input").val(""),t.find(".range input").val("");n.css("background","linear-gradient(to right, #0073AA 0%, #0073AA 0%, #ebebeb 0%, #ebebeb 100%)"),e.updateUnit()})),this.container.find("input[type=range]").on("input change",(function(){let e=jQuery(this),t=e.val(),n=e.attr("max"),i=e.attr("min"),a=(t-i)/(n-i)*100,o=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input"),r=`linear-gradient(to right, #0073AA 0%, #0073AA ${a}%, #ebebeb ${a}%, #ebebeb 100%)`;e.css("background",r),o.val(t),o.change()})),this.container.find(".colormag-slider-reset").click((function(){let t=jQuery(this).closest("li").children(".slider-label"),n=t.find("input[type=range]"),i=t.find(".colormag-range-value input"),a=t.find(".unit-wrapper select"),o=n.data("reset_value"),r=n.data("reset_unit");if(r){var s=e.params.input_attrs.attributes_config[r];s&&t.find("input").each((function(){jQuery(this).attr("min",s.min),jQuery(this).attr("max",s.max),jQuery(this).attr("step",s.step)}))}a.val(r||"px").change(),n.val(o).change(),i.val(o).change();a.val(),n.val(),i.val()}))},updateSize:function(){let e=this,t=e.setting.get(),n=e.container.find(".slider-hidden-value"),i={size:{}};e.container.find(".size .input-wrapper").each((function(){let e=jQuery(this).find("input").val();i.size=e})),t=jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)},updateUnit:function(){let e=this,t=e.setting._value,n=e.container.find(".slider-hidden-value"),i={unit:{}};e.container.find(".unit-wrapper .input-wrapper").each((function(){let e=jQuery(this).find("select").val();i.unit=e})),t=jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)),e.setting.set(t)}}),wp.customize.controlConstructor["colormag-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",(function(){e.setting.set(jQuery(this).val())}))}}),function(e){wp.customize.controlConstructor["colormag-date"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,n=t.selector,i=e(n).find("input");i.datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,showOn:"button",buttonText:"",beforeShow:function(t,n){e(t).after(e(t).datepicker("widget"))}}),i.on("change keyup paste",(function(){t.setting.set(e(this).val())}))}})}(jQuery),wp.customize.controlConstructor["colormag-typography"]=wp.customize.Control.extend({ready:function(){"use strict";const e=this;function t(t){e.container.find(`.${t} .control-wrap`).each((function(){const n=jQuery(this),i=n.find(".range input"),a=n.find(".size input"),o=n.find(".unit-wrapper select"),r=i.data("reset_value"),s=i.data("reset_unit");if(s){let n=e.params.input_attrs.attributes_config[t][s];n&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",n.min),jQuery(this).attr("max",n.max),jQuery(this).attr("step",n.step)}))}o.val(s||"px").change(),i.val(r).change(),a.val(r).change();o.val(),i.val(),a.val()}))}e.container.find(".font-size .control-wrap").each((function(){let e=jQuery(this).find("input[type=number]").data("device"),t=jQuery(this).closest(".font-size").find("."+e+" input[type=range]"),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",r)})),e.container.find(".line-height .control-wrap").each((function(){let e=jQuery(this).find("input[type=number]").data("device"),t=jQuery(this).closest(".line-height").find("."+e+" input[type=range]"),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",r)})),e.container.find(".letter-spacing .control-wrap").each((function(){let e=jQuery(this).find("input[type=number]").data("device"),t=jQuery(this).closest(".letter-spacing").find("."+e+" input[type=range]"),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`;t.css("background",r)})),e.renderFontSelector(),e.renderVariantSelector(),e.renderSubsetSelector(),e.container.on("change",".font-style select",(function(){e.saveValue("font-style",jQuery(this).val())})),e.container.on("change",".text-transform select",(function(){e.saveValue("text-transform",jQuery(this).val())})),e.container.on("change",".text-decoration select",(function(){e.saveValue("text-decoration",jQuery(this).val())})),e.container.on("change keyup",".font-size .size input",(function(){let t=jQuery(this),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=jQuery(this).closest(".slider-wrapper"),s=r.find("input[type=range]"),l=r.find("input[type=number]").data("device"),c=r.find(".colormag-font-size-"+l+"-warning"),u=(s.val(n),`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`);s.css("background",u);let d=parseFloat(i),p=parseFloat(a),g=parseFloat(n);p>g||d<g?(c.html("Value must be between "+a+" and "+i),c.addClass("warning-visible"),t.addClass("invalid-color")):(c.removeClass("warning-visible"),t.removeClass("invalid-color")),e.updateFontSize()})),e.container.on("change keyup paste input",".font-size .range input",(function(){e.updateFontSize()})),this.container.find(".font-size input[type=range]").on("input change",(function(){var e=jQuery(this).val(),t=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input");t.val(e),t.change()})),this.container.find(".line-height input[type=range]").on("input change",(function(){var e=jQuery(this),t=e.val(),n=e.attr("max"),i=e.attr("min"),a=(t-i)/(n-i)*100,o=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input"),r=`linear - gradient( to right, #0073AA 0 % , #0073AA ${a} % , #ebebeb ${a} % , #ebebeb 100 % )`;e.css("background",r),o.val(t),o.change()})),this.container.find(".letter-spacing input[type=range]").on("input change",(function(){var e=jQuery(this),t=e.val(),n=e.attr("max"),i=e.attr("min"),a=(t-i)/(n-i)*100,o=jQuery(this).closest(".slider-wrapper").find(".colormag-range-value .input-wrapper input"),r=`linear - gradient( to right, #0073AA 0 % , #0073AA ${a} % , #ebebeb ${a} % , #ebebeb 100 % )`;e.css("background",r),o.val(t),o.change()})),e.container.on("change",".font-size-unit",(function(){e.container.find(".font-size .control-wrap").each((function(){let t=jQuery(this).find(".unit-wrapper .font-size-unit").val();if(t){let n=e.params.input_attrs.attributes_config["font-size"][t];n&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",n.min),jQuery(this).attr("max",n.max),jQuery(this).attr("step",n.step)}))}}));let t=jQuery(this).closest(".control-wrap"),n=t.find(".range input");t.find(".size input").val(""),t.find(".range input").val("");n.css("background","linear-gradient(to right, #0073AA 0%, #0073AA 0%, #ebebeb 0%, #ebebeb 100%)"),e.updateFontSizeUnit()})),e.container.on("click",".colormag-font-size-reset",(function(){t("font-size")})),e.container.on("click",".colormag-line-height-reset",(function(){t("line-height")})),e.container.on("click",".colormag-letter-spacing-reset",(function(){t("letter-spacing")})),e.container.on("change keyup paste input",".line-height input",(function(){let t=jQuery(this),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=jQuery(this).closest(".slider-wrapper"),s=r.find("input[type=range]"),l=r.find("input[type=number]").data("device"),c=r.find(".colormag-line-height-"+l+"-warning"),u=(s.val(n),`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`);s.css("background",u);let d=parseFloat(i),p=parseFloat(a),g=parseFloat(n);p>g||d<g?(c.html("Value must be between "+a+" and "+i),c.addClass("warning-visible"),t.addClass("invalid-color")):(c.removeClass("warning-visible"),t.removeClass("invalid-color")),e.updateLineHeight()})),e.container.on("change",".line-height-unit",(function(){e.container.find(".line-height .control-wrap").each((function(){var t=jQuery(this).find(".unit-wrapper .line-height-unit").val();if(t){var n=e.params.input_attrs.attributes_config["line-height"][t];n&&jQuery(this).find("input").each((function(){jQuery(this).attr("min",n.min),jQuery(this).attr("max",n.max),jQuery(this).attr("step",n.step)}))}}));let t=jQuery(this).closest(".control-wrap"),n=t.find(".range input");t.find(".size input").val(""),t.find(".range input").val("");n.css("background","linear-gradient(to right, #0073AA 0%, #0073AA 0%, #ebebeb 0%, #ebebeb 100%)"),e.updateLineHeightUnit()})),e.container.on("change keyup paste input",".letter-spacing-unit",(function(){e.updateLetterSpacingUnit()})),e.container.on("change keyup paste input",".letter-spacing input",(function(){var t=jQuery(this),n=t.val(),i=t.attr("max"),a=t.attr("min"),o=(n-a)/(i-a)*100,r=jQuery(this).closest(".slider-wrapper"),s=r.find("input[type=range]"),l=r.find("input[type=number]").data("device"),c=r.find(".colormag-letter-spacing-"+l+"-warning"),u=(s.val(n),`linear-gradient(to right, #0073AA 0%, #0073AA ${o}%, #ebebeb ${o}%, #ebebeb 100%)`);s.css("background",u);let d=parseFloat(i),p=parseFloat(a),g=parseFloat(n);p>g||d<g?(c.html("Value must be between "+a+" and "+i),c.addClass("warning-visible"),t.addClass("invalid-color")):(c.removeClass("warning-visible"),t.removeClass("invalid-color")),e.updateLetterSpacing()}))},renderFontSelector:function(){var e,t=this,n=t.selector+" .font-family select",i=[],a=[],o=[],r=t.setting._value,s=t.getFonts();_.isUndefined(s.standard)||_.each(s.standard,(function(e){i.push({id:e.family.replace(/&quot;/g,"&#39"),text:e.label})})),_.isUndefined(s.google)||_.each(s.google,(function(e){a.push({id:e.family,text:e.label})})),data=[{text:s.standardfontslabel,children:i},{text:s.googlefontslabel,children:a}],_.isUndefined(s.custom)||(_.each(s.custom,(function(e){o.push({id:e.family,text:e.label})})),data.push({text:s.customfontslabel,children:o})),e=jQuery(n).selectWoo({data:data,width:"100%"}),r["font-family"]&&e.val(r["font-family"].replace(/'/g,'"')).trigger("change"),e.on("change",(function(){t.saveValue("font-family",jQuery(this).val()),t.renderVariantSelector(),t.renderSubsetSelector()}))},getFonts:function(){return _.isUndefined(ColorMagCustomizerControlTypography)?{google:[],standard:[]}:ColorMagCustomizerControlTypography},renderVariantSelector:function(){var e,t=this,n=t.setting._value,i=n["font-family"],a=t.getVariants(i),o=t.selector+" .font-weight select",r=[],s=!1;!1!==a?(jQuery(t.selector+" .font-weight").show(),_.each(a,(function(e){n["font-weight"]===e.id&&(s=!0),r.push({id:e.id,text:e.label})})),s||(n["font-weight"]="regular"),jQuery(o).hasClass("select2-hidden-accessible")&&(jQuery(o).selectWoo("destroy"),jQuery(o).empty()),(e=jQuery(o).selectWoo({data:r,width:"100%"})).val(n["font-weight"]).trigger("change"),e.on("change",(function(){t.saveValue("font-weight",jQuery(this).val())}))):jQuery(t.selector+" .font-weight").hide()},getVariants:function(e){var t=this.getFonts(),n=!1;return _.each(t.standard,(function(t){if(e&&t.family===e.replace(/'/g,'"'))return n=t.variants})),_.each(t.google,(function(t){if(t.family===e)return n=t.variants})),_.isUndefined(t.custom)||_.each(t.custom,(function(t){if(t.custom===e)return n=t.variants})),n},renderSubsetSelector:function(){var e,t=this,n=t.setting._value,i=n["font-family"],a=t.getSubsets(i),o=t.selector+" .subsets select",r=[],s=n.subsets;!1!==a?(jQuery(t.selector+" .subsets").show(),_.each(a,(function(e){_.isObject(s)&&-1===s.indexOf(e.id)&&(s=_.reject(s,(function(t){return t===e.id}))),r.push({id:e.id,text:e.label})}))):jQuery(t.selector+" .subsets").hide(),jQuery(o).hasClass("select2-hidden-accessible")&&(jQuery(o).selectWoo("destroy"),jQuery(o).empty()),(e=jQuery(o).selectWoo({data:r,width:"100%"})).val(s).trigger("change"),e.on("change",(function(){t.saveValue("subsets",jQuery(this).val())}))},getSubsets:function(e){var t=!1,n=this.getFonts();return _.each(n.google,(function(n){if(n.family===e)return t=n.subsets})),t},saveValue:function(e,t){var n=this,i=n.container.find(".typography-hidden-value"),a=n.setting._value;a[e]=t,jQuery(i).attr("value",JSON.stringify(a)).trigger("change"),n.setting.set(a)},updateFontSize:function(){var e=this,t=e.setting._value,n=e.container.find(".typography-hidden-value"),i={"font-size":{desktop:{size:t["font-size"].desktop.size,unit:t["font-size"].desktop.unit},tablet:{size:t["font-size"].tablet.size,unit:t["font-size"].tablet.unit},mobile:{size:t["font-size"].mobile.size,unit:t["font-size"].mobile.unit}}};e.container.find(".font-size .control-wrap").each((function(){var e=jQuery(this).find("input[type=number]").val(),t=jQuery(this).find("input[type=number]").data("device");i["font-size"][t].size=e})),jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)},updateFontSizeUnit:function(){let e=this,t=e.setting._value,n=e.container.find(".typography-hidden-value"),i={"font-size":{desktop:{size:t["font-size"].desktop.size,unit:t["font-size"].desktop.unit},tablet:{size:t["font-size"].tablet.size,unit:t["font-size"].tablet.unit},mobile:{size:t["font-size"].mobile.size,unit:t["font-size"].mobile.unit}}};e.container.find(".font-size .control-wrap").each((function(){let e=jQuery(this).find(".unit-wrapper .font-size-unit").val(),t=jQuery(this).find(".unit-wrapper .font-size-unit").data("device");i["font-size"][t].unit=e,i["font-size"][t].size=""})),jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)},updateLineHeight:function(){var e=this,t=e.setting._value,n=e.container.find(".typography-hidden-value"),i={"line-height":{desktop:{size:t["line-height"].desktop.size,unit:t["line-height"].desktop.unit},tablet:{size:t["line-height"].tablet.size,unit:t["line-height"].tablet.unit},mobile:{size:t["line-height"].mobile.size,unit:t["line-height"].mobile.unit}}};e.container.find(".line-height .control-wrap").each((function(){var e=jQuery(this).find("input[type=number]").val(),t=jQuery(this).find("input[type=number]").data("device");i["line-height"][t].size=e})),jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)},updateLineHeightUnit:function(){var e=this,t=e.setting._value,n=e.container.find(".typography-hidden-value"),i={"line-height":{desktop:{size:t["line-height"].desktop.size,unit:t["line-height"].desktop.unit},tablet:{size:t["line-height"].tablet.size,unit:t["line-height"].tablet.unit},mobile:{size:t["line-height"].mobile.size,unit:t["line-height"].mobile.unit}}};e.container.find(".line-height .control-wrap").each((function(){var e=jQuery(this).find(".unit-wrapper .line-height-unit").val(),t=jQuery(this).find(".unit-wrapper .line-height-unit").data("device");i["line-height"][t].unit=e})),jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)},updateLetterSpacing:function(){var e=this,t=e.setting._value,n=e.container.find(".typography-hidden-value"),i={"letter-spacing":{desktop:{size:t["letter-spacing"].desktop.size,unit:t["letter-spacing"].desktop.unit},tablet:{size:t["letter-spacing"].tablet.size,unit:t["letter-spacing"].tablet.unit},mobile:{size:t["letter-spacing"].mobile.size,unit:t["letter-spacing"].mobile.unit}}};e.container.find(".letter-spacing .control-wrap").each((function(){var e=jQuery(this).find("input[type=number]").val(),t=jQuery(this).find("input[type=number]").data("device");i["letter-spacing"][t].size=e})),jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)},updateLetterSpacingUnit:function(){var e=this,t=e.setting._value,n=e.container.find(".typography-hidden-value"),i={"letter-spacing":{desktop:{size:t["letter-spacing"].desktop.size,unit:t["letter-spacing"].desktop.unit},tablet:{size:t["letter-spacing"].tablet.size,unit:t["letter-spacing"].tablet.unit},mobile:{size:t["letter-spacing"].mobile.size,unit:t["letter-spacing"].mobile.unit}}};e.container.find(".letter-spacing .control-wrap").each((function(){var e=jQuery(this).find(".unit-wrapper .letter-spacing-unit").val(),t=jQuery(this).find(".unit-wrapper .letter-spacing-unit").data("device");i["letter-spacing"][t].unit=e})),jQuery.extend(t,i),jQuery(n).attr("value",JSON.stringify(t)).trigger("change"),e.setting.set(t)}}),wp.customize.controlConstructor["colormag-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,t=e.setting._value;this.container.on("change","input",(function(){t=!!jQuery(this).is(":checked"),e.setting.set(t)}))}});